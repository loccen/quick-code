# 速码网功能需求规格说明

## 1. 用户管理系统

### 1.1 用户注册与认证
- **FR-001**: 用户可以通过邮箱注册账户
- **FR-002**: 实现邮箱验证和密码重置功能
- **FR-003**: 支持双因素认证（2FA）
- **FR-004**: 用户可以设置和修改个人资料
- **FR-005**: 用户可以上传和管理头像
- **FR-006**: 用户注册后既是买家也是卖家，可以浏览项目并购买，也可以上传自己的项目赚取积分奖励

## 2. 项目市场功能

### 2.1 项目浏览与搜索
- **FR-007**: 用户可以浏览项目市场首页
- **FR-008**: 支持按分类、标签、积分价格筛选项目
- **FR-009**: 提供关键词搜索功能
- **FR-010**: 支持高级搜索（技术栈、更新时间等）
- **FR-011**: 显示项目详情页面（描述、截图、价格等）

### 2.2 项目详情与预览
- **FR-012**: 展示项目的技术栈和依赖信息(项目README文件渲染内容)
- **FR-013**: 提供代码结构预览
- **FR-014**: 显示项目拥有者信息
- **FR-015**: 展示项目的更新历史
- **FR-016**: 提供相关推荐功能
- **FR-017**: 已登录用户提供购买、收藏、分享功能
- **FR-018**: 已登录用户提供一键部署演示站功能(该功能可以有多个入口，首页项目卡片浏览，项目详情页浏览， “我的项目”卡片浏览页)
- **FR-019**: 已登录用户可以在“我的项目”页面查看自己上传，购买，收藏的项目。

## 3. 项目管理

### 3.1 项目上传
- **FR-020**: 用户可以上传Docker化的源码项目(上传项目压缩包，平台在项目上传页提供标准化的说明文档，告知用户需如何组织docker/docker compose相关的配置以及文件夹目录结构)
- **FR-021**: 后台检测压缩包，并进行安全检查，然后自动解压，并进行git仓库初始化(本地git管理)。项目进入待审核状态。

### 3.2 项目审核
- **FR-022**: 上传成功后，若检测到标准化的Docker配置，自动触发docker构建和容器部署流程。
- **FR-023**: 容器成功部署后，由人工检测项目可用度和完整性，从而进行项目评估，评估通过后，项目自动发布到市场。
- **FR-024**: 项目成功上传后，管理员可在后台管理系统中查看到待审核的项目，对于触发了docker自动构建的项目，还能看到构建状态。
- **FR-025**: 对于非容器化或者自动检测失败的项目，需人工判断是直接上架还是驳回给作者进行改造，驳回时，需要给出驳回理由。
- **FR-026**: 项目完成审核后，作者获得积分奖励，若项目容器化改造成功，获得双倍积分奖励。

### 3.3 项目下架
- **FR-027**: 管理员可以在后台管理系统中下架违规或低质量的项目
- **FR-028**: 用户可以申请下架自己的项目
- **FR-029**: 下架的项目不再显示在市场中
- **FR-030**: 项目下架但已经购买的用户还是可以在“我的项目”里查阅到，并且不影响下载和一键部署功能。

### 3.4 项目更新
- **FR-031**: 用户可以对已上传的项目进行更新，可以是更新功能，也可以是将非容器化项目进行容器化改造的更新。用户成功完成容器化改造，会进行双倍积分奖励。
- **FR-032**: 对于用户没有能力进行容器化改造的项目，管理员可以协助进行容器化改造，并完成项目更新，更新后，作者无双倍积分奖励。
- **FR-033**: 项目更新时，用户/管理员需提交一段描述信息，用于说明更新内容以及作为git提交信息，方便用户查阅。

### 3.5 项目下载
- **FR-034**: 用户可以下载已购买的项目源码，下载按钮在项目卡片浏览，项目详情页浏览， “我的项目”卡片浏览页展示，点击后会自动下载zip压缩包。
- **FR-035**: 项目下载按钮仅对购买用户展示，未购买用户展示购买按钮。

## 4. 一键部署服务

### 4.1 平台演示站
- **FR-036**: 已登录，未购买的用户，可以选择免费一键部署源码到演示环境。
- **FR-037**: 提供临时域名访问演示站
- **FR-038**: 演示站有免费时长限制（如2小时）
- **FR-039**: 支持延长演示时间（消耗积分）
- **FR-040**: 自动清理过期的演示环境

### 4.2 用户自有服务器部署
- **FR-041**: 对于已经购买的项目，用户可以选择下载源码到本地，自己构建镜像或者源码build部署。也可以只直接运行部署脚本，从平台的docker仓库拉取镜像进行一键部署。
- **FR-042**: 提供部署指导文档
- **FR-043**: 支持环境变量配置，支持docker-compose.yml文件配置
- **FR-044**: docker镜像拉取应提供鉴权机制，避免未购买用户直接从平台仓库拉取镜像部署到自己的服务器上。

## 5. 支付与交易系统

### 5.1 支付处理
- **FR-045**: 支持多种支付渠道（信用卡、支付宝、微信支付、加密火币、第三方钱包）
- **FR-046**: 采用适配器模式支持多个支付渠道
- **FR-047**: 实现安全的支付流程

### 5.2 分账管理
- **FR-048**: 用户上传的项目被其他用户购买，可获取一定比例的平台佣金，对于用户自己完成容器化和平台完成容器的项目，佣金比例不一致，管理员可在后台管理系统中进行调整。
- **FR-049**: 分账以积分形式体现
- **FR-050**: 用户可选择将积分进行提现，按照平台设置的兑换比例，可兑换为对应的法币，提现渠道和支付渠道一致。用户发起提现申请后，由管理员在后台审核通过后，自动触发支付到用户指定账户。

## 6. 积分经济系统

### 6.1 积分管理
- **FR-051**: 建立积分与法币的兑换机制
- **FR-052**: 用户可以充值购买积分
- **FR-053**: 用户可以将积分提现
- **FR-054**: 记录所有积分交易历史
- **FR-055**: 提供积分余额查询

### 6.2 积分获取与消费
- **FR-056**: 用户可以上架并销售源码获得积分
- **FR-057**: Docker化项目获得双倍积分奖励
- **FR-058**: 用户使用演示站功能时可以使用积分延长演示时间
- **FR-059**: 用户可以使用积分兑换永久会员，永久会员拥有所有源码免费下载权限，演示功能积分消耗有50%折扣优惠。

## 7. 用户交互功能

### 7.1 消息与通知
- **FR-060**: 实现站内消息系统
- **FR-061**: 支持邮件通知功能
- **FR-062**: 推送重要事件通知（购买、审核等）
- **FR-063**: 提供消息中心管理界面
- **FR-064**: 支持消息已读/未读状态

## 8. 管理后台功能

### 8.1 用户管理
- **FR-065**: 查看和管理所有用户信息
- **FR-066**: 支持用户状态管理（正常、冻结、封禁）
- **FR-067**: 查看用户行为日志
- **FR-068**: 处理用户申诉和投诉
- **FR-069**: 生成用户统计报告

### 8.2 内容管理
- **FR-070**: 管理源码项目的审核流程
- **FR-071**: 查看和更新项目
- **FR-072**: 管理项目分类和标签

### 8.3 财务管理
- **FR-073**: 查看平台收入和支出统计
- **FR-074**: 管理交易记录和分账
- **FR-075**: 处理退款和争议
- **FR-076**: 生成财务报表
- **FR-077**: 管理积分系统参数

## 9. 安全与合规

### 9.1 安全防护
- **FR-078**: 实现代码安全扫描
- **FR-079**: 防止恶意代码上传
- **FR-080**: 容器安全隔离
- **FR-081**: 数据加密存储
- **FR-082**: API访问频率限制

### 9.2 合规管理
- **FR-083**: 用户协议和隐私政策
- **FR-084**: 数据备份和恢复
- **FR-085**: 审计日志记录

## 10. 性能与监控

### 10.1 性能优化
- **FR-86**: 数据库查询优化
- **FR-87**: 缓存机制实现
- **FR-88**: 图片和文件压缩
- **FR-89**: 响应式设计支持

### 10.2 监控告警
- **FR-90**: 系统性能监控
- **FR-91**: 错误日志收集
- **FR-92**: 用户行为分析
- **FR-93**: 自动告警机制
- **FR-94**: 健康检查接口
